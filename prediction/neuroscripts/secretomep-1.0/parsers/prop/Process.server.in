#!/usr/freeware/bin/gawk -f
BEGIN {
   done=1;
   first=1;
}
function report ( ) {
   if (first) {
      first=0;
      return;
   }
   printf(".") >> "/dev/stderr";
   fn=fileid".Features/prop_vect";
   beginarray(ident,fn);
   makearrays(len,setPval,setPpos,cntP,0,fn);
   endarray(fn);
}
/\/\/\-\/\//{
   if (done==0) {
      printf("*",ident) >> "/dev/stderr";
   }else{
      report();
   }
   ident=$2;
   done=0;
   cntP=0;
   next;
}
(ident==$2) {
   len=$1;
   done=1;
   next;
}
(ident==$1){ 
   done=1;
   pos=$2;
   val=$4;
   
   setPpos[cntP]=pos;
   setPval[cntP]=val;
   cntP++;
}
END{
   if (done==0) {
      printf("*",ident) >> "/dev/stderr";
   }else{
      report();
   }
}
